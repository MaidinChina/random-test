<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random test page</title>
  <script>


(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking".split(" "), 0);
    

function isInViewport(element) {
    const rect = element.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.right <= (window.innerWidth || document.documentElement.clientWidth)
    );
}
/*
var sec1 = document.querySelector('#section1');
var sec2 = document.querySelector('#section2');
var sec3 = document.querySelector('#section3');
var sec4 = document.querySelector('#section4');
window.addEventListener('scroll', function (event) {
	if (isInViewport(sec1)) {
		branch.journeys_title = "section 1"
    
	} else if (isInViewport(sec2)){
    branch.journeys_title = "section 2"
  } else if (isInViewport(sec3)){
  // branch.journeys_title = "section 3"


  } else if (isInViewport(sec4)){
    branch.closeJourney(function(err, data) {
      console.log(err, data);
    });
  }
}, false);

*/

    
    // init Branch
    let branch_live_key = 'key_live_cjJYI5F72kURkQwfP96BYllhCAcS2Tng';
    let clickTimestampKey = 'clickTimestamp'
    branch.init(branch_live_key, function(err, data) {
      document.getElementById("h2text").innerText = clickTimestamp
    })

    function showJourney(journeyTitle) {

      branch.closeJourney(function(err, data) {
        console.log(err, data);
      }); 



      // optional additional deep link data
      var linkData = {
        campaign: 'content 123',
        channel: 'facebook',
        feature: 'dashboard',
        stage: 'new user',
        tags: [ 'tag1', 'tag2', 'tag3' ],
        alias: '',
        data: {
          'custom_bool': true,
          'custom_int': Date.now(),
          'custom_string': 'hello',
          '$journeys_title':journeyTitle,
          '$og_title': 'Title',
          '$og_description': 'Description',
          '$og_image_url':'http://lorempixel.com/400/400'
        }
      };

      branch.setBranchViewData(linkData);

      // reopen
      branch.track("pageview");
    }
  </script>
</head>
<body>
  <div id="contianer">
        <div id="section1">
        <button onclick="showJourney('journey 1')">show journey 1</button>
        <button onclick="showJourney('journey 2')">show journey 2</button>
        <p>
        1111111111111111111111111111
        1111111111111111111111111
        11111111111111111111111111111111
        111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111
        1111111111111</p>
        
        <p>
        1111111111111111111111111111
        1111111111111111111111111
        11111111111111111111111111111111
        111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111
        1111111111111</p>

        <p>
        1111111111111111111111111111
        1111111111111111111111111
        11111111111111111111111111111111
        111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111
        1111111111111</p>
        <p>
        1111111111111111111111111111
        1111111111111111111111111
        11111111111111111111111111111111
        111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111
        1111111111111</p>
        <p>
        1111111111111111111111111111
        1111111111111111111111111
        11111111111111111111111111111111
        111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111
        1111111111111</p>
        </div>
        <div id="section2">
        
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        <p>
        2222222222222
        222222222222
        22222222</p>
        </div>
        <div id="section3">
        
        
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        <p>
        3333333
        33333333333
        33333333</p>
        
        </div>
        <div id="section4">
        

        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>
        <p>
        44444444444
        44444444444
        44444444444</p>

        </div>
  </div>
</body>
</html>
